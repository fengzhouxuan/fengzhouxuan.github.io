---
layout:     post
title:      Unity开发之Android必要的基础知识（三）
subtitle:   Gradle基础知识
date:       2022-08-22 20:30:22+0800
author:     打个大西瓜
# header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - Android
---

# Gradle
## 什么是Gradle
Gradle是一款基于Apache的Ant和Maven概念的项目自动化开源构建工具，是Android的主流构建工具

首先看看Unity导出的Android工程中的gradle文件在目录中的位置

![文件目录](/img/android-img//android-project.jpg)

Unity导出为Gradle工程时，Unity会创建拥有两个模块的Gradle工程

**launcher**
作为启动unityLibrary模块的简单android应用，这个模块可以用别的android应用替换

**unityLibrary**
unityLibrary包含了unity运行时以及资源和数据，这个模块作为一个库可以整合到任何一个Gradle项目中，

也就是说，Unity在导出到android后，自动为我们创建了一个简单的android工程，以及一个启动模块，和一个包含所有unity相关运行时、资源、数据的库模块，启动模块负责依赖库模块，并且启动它

**图中编号对应的gradle文件：**

1. launcher模块 build
2. unity模块 build
3. 项目级 build
4. 项目级 setting

## launcher模块 build.gradle

launcher模块是工程的启动模块
``` xml
// GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN

apply plugin: 'com.android.application'

dependencies {
    //依赖unityLibrary，unity编译后的所有资源全部在unityLibrary模块中
    implementation project(':unityLibrary')
    }

android {
    compileSdkVersion 29
    buildToolsVersion '30.0.2'

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    defaultConfig {
        minSdkVersion 21
        targetSdkVersion 29
        applicationId 'com.dudu.hole.hoard.eating'
        ndk {
            abiFilters 'armeabi-v7a', 'arm64-v8a'
        }
        versionCode 1101
        versionName '1.101'
    }

    aaptOptions {
        noCompress = ['.unity3d', '.ress', '.resource', '.obb', '.gitkeep']
        ignoreAssetsPattern = "!.svn:!.git:!.ds_store:!*.scc:.*:!CVS:!thumbs.db:!picasa.ini:!*~"
    }

    signingConfigs {
        release {
            storeFile file('C:/Mydocuments/workspace/Unity/ArcadeHole/hole_31.keystore')
            storePassword ''
            keyAlias 'hole-31'
            keyPassword ''
        }
    }

    lintOptions {
        abortOnError false
    }

    buildTypes {
        debug {
            minifyEnabled false
            useProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt')
            signingConfig signingConfigs.release
            jniDebuggable true
        }
        release {
            minifyEnabled false
            useProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt')
            signingConfig signingConfigs.release
        }
    }

    packagingOptions {
        doNotStrip '*/armeabi-v7a/*.so'
        doNotStrip '*/arm64-v8a/*.so'
    }

    bundle {
        language {
            enableSplit = false
        }
        density {
            enableSplit = false
        }
        abi {
            enableSplit = true
        }
    }
}

```

***TO BE CONTINUE......！！***